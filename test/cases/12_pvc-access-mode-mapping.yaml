apiVersion: dr-syncer.io/v1alpha1
kind: Replication
metadata:
  name: pvc-access-mode-mapping
  namespace: dr-sync-test-case12
spec:
  sourceCluster: source-cluster
  destinationCluster: dest-cluster
  sourceNamespace: dr-sync-test-case12
  destinationNamespace: dr-sync-test-case12
  resourceTypes:
    - PersistentVolumeClaims
  pvcConfig:
    accessModeMappings:
      - from: "ReadWriteOnce"
        to: "ReadWriteOncePod"
      - from: "ReadWriteMany"
        to: "ReadOnlyMany"
---
# Test ReadWriteOnce to ReadWriteOncePod mapping
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: test-pvc-rwo
  namespace: dr-sync-test-case12
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
  storageClassName: standard
---
# Test ReadWriteMany to ReadOnlyMany mapping
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: test-pvc-rwx
  namespace: dr-sync-test-case12
spec:
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 1Gi
  storageClassName: standard
---
# Test unmapped access mode (should use original)
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: test-pvc-rox
  namespace: dr-sync-test-case12
spec:
  accessModes:
    - ReadOnlyMany
  resources:
    requests:
      storage: 1Gi
  storageClassName: standard
---
# Test access mode override via label
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: test-pvc-override
  namespace: dr-sync-test-case12
  labels:
    dr-syncer.io/access-mode: "ReadWriteOncePod"
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
  storageClassName: standard
