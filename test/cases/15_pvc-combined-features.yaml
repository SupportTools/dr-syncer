apiVersion: dr-syncer.io/v1alpha1
kind: Replication
metadata:
  name: pvc-combined-features
  namespace: dr-sync-test-case15
spec:
  sourceCluster: source-cluster
  destinationCluster: dest-cluster
  sourceNamespace: dr-sync-test-case15
  destinationNamespace: dr-sync-test-case15
  resourceTypes:
    - PersistentVolumeClaims
  pvcConfig:
    syncPersistentVolumes: true
    preserveVolumeAttributes: true
    storageClassMappings:
      - from: "standard"
        to: "premium-rwo"
      - from: "nfs-storage"
        to: "nfs-premium"
    accessModeMappings:
      - from: "ReadWriteOnce"
        to: "ReadWriteOncePod"
      - from: "ReadWriteMany"
        to: "ReadOnlyMany"
---
# Test PVC with multiple features combined
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: test-pvc-combined
  namespace: dr-sync-test-case15
  annotations:
    volume.beta.kubernetes.io/mount-options: "rw,nfsvers=4.1"
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
  storageClassName: standard
  volumeMode: Filesystem
  volumeAttributes:
    iops: "3000"
    encrypted: "true"
---
# Test PVC with label overrides
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: test-pvc-overrides
  namespace: dr-sync-test-case15
  labels:
    dr-syncer.io/storage-class: "ultra-fast"
    dr-syncer.io/access-mode: "ReadWriteMany"
    dr-syncer.io/sync-pv: "false"
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 2Gi
  storageClassName: standard
---
# Test NFS PVC with combined features
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: test-pvc-nfs
  namespace: dr-sync-test-case15
  annotations:
    volume.beta.kubernetes.io/mount-options: "rw,nfsvers=4.1,hard"
spec:
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 5Gi
  storageClassName: nfs-storage
